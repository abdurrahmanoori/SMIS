@page "/weather"

<div class="weather-container">
    <SfCard>
        <CardHeader Title="Weather Forecast" SubTitle="Simple weather data display"></CardHeader>
        <CardContent>
            @if (forecasts == null)
            {
                <div class="loading-container">
                    <SfSpinner @bind-Visible="@IsLoading" Label="Loading weather data..."></SfSpinner>
                </div>
            }
            else
            {
                <SfGrid DataSource="@forecasts" AllowPaging="true" AllowSorting="true">
                    <GridPageSettings PageSize="5"></GridPageSettings>
                    <GridColumns>
                        <GridColumn Field="DateString" HeaderText="Date" Width="120"></GridColumn>
                        <GridColumn Field="TemperatureC" HeaderText="Temp. (°C)" Width="120"></GridColumn>
                        <GridColumn Field="TemperatureF" HeaderText="Temp. (°F)" Width="120"></GridColumn>
                        <GridColumn Field="Summary" HeaderText="Summary" Width="150"></GridColumn>
                    </GridColumns>
                </SfGrid>
            }
        </CardContent>
    </SfCard>
</div>

@code {
    private List<object> forecasts;
    private bool IsLoading = true;

    protected override async Task OnInitializedAsync()
    {
        await Task.Delay(1000);

        var startDate = DateOnly.FromDateTime(DateTime.Now);
        var summaries = new[] { "Freezing", "Bracing", "Chilly", "Cool", "Mild", "Warm", "Balmy", "Hot", "Sweltering", "Scorching" };
        
        forecasts = Enumerable.Range(1, 5).Select(index => new
        {
            DateString = startDate.AddDays(index).ToString("MMM dd"),
            TemperatureC = Random.Shared.Next(-20, 55),
            TemperatureF = 32 + (int)(Random.Shared.Next(-20, 55) / 0.5556),
            Summary = summaries[Random.Shared.Next(summaries.Length)]
        }).ToList<object>();
        
        IsLoading = false;
    }
}

<style>
    .weather-container {
        padding: 20px;
        max-width: 800px;
        margin: 0 auto;
    }
    
    .loading-container {
        text-align: center;
        padding: 50px;
    }
</style>
